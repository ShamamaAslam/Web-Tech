<%- include("../layouts/main", {
  title: title || "Messages",
  pageCss: "admin.css",
  body: `
  <div class="admin-wrap">
    <div class="admin-head">
      <h1>Contact Messages</h1>
      <div class="admin-nav">
        <a class="pill" href="/admin">Dashboard</a>
        <a class="pill" href="/admin/orders">Orders</a>
        <a class="pill" href="/admin/appointments">Appointments</a>
        <a class="pill active" href="/admin/messages">Messages</a>
      </div>
    </div>

    ${messages.length ? `
      <table class="table">
        <thead><tr><th>Date</th><th>Name</th><th>Email</th><th>Subject</th><th>Message</th></tr></thead>
        <tbody>
          ${messages.map(m => `
            <tr>
              <td>${new Date(m.createdAt).toLocaleString()}</td>
              <td>${m.name}</td>
              <td>${m.email}</td>
              <td>${m.subject || "-"}</td>
              <td>${(m.message || "").slice(0, 80)}${(m.message || "").length > 80 ? "..." : ""}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>
    ` : `<p class="muted">No messages yet.</p>`}
  </div>
  `
}) %>
